<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>9å±åƒç´ æ•…äº‹</title>
  <style>
    :root{
      --bg:#0b0d12;
      --fg:#e8eef7;
      --muted:#9aa7b6;
      --card:#121826;
      --accent:#7aa7ff;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bot: env(safe-area-inset-bottom, 0px);
      --maxw: 420px;
    }
    *{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
    html,body{height:100%;}
    body{
      margin:0;
      background: radial-gradient(1200px 800px at 50% 0%, #121a2c 0%, var(--bg) 55%);
      color:var(--fg);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", system-ui, sans-serif;
      overflow:hidden;
    }

    /* é¡¶éƒ¨è¿›åº¦ */
    header{
      position:fixed;
      top:0; left:0; right:0;
      padding: calc(10px + var(--safe-top)) 16px 10px;
      display:flex;
      justify-content:center;
      pointer-events:none;
      z-index:10;
    }
    .progress{
      width:min(var(--maxw), calc(100% - 32px));
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:13px;
      color:var(--muted);
      opacity:.95;
    }

    /* ä¸»å®¹å™¨ */
    main{
      height:100%;
      display:flex;
      justify-content:center;
      align-items:stretch;
      padding: calc(54px + var(--safe-top)) 16px calc(18px + var(--safe-bot));
    }

    .screen{
      width:min(var(--maxw), 100%);
      height:100%;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .card{
      background: color-mix(in srgb, var(--card) 92%, black);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 16px;
      overflow:hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,.35);
    }

    /* å›¾ç‰‡åŒº */
    .imgWrap{
      position:relative;
      flex: 1 1 auto;
      min-height: 45vh;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
    }

    img.pixel{
      width: 100%;
      height: 100%;
      max-height: 62vh;
      object-fit: contain;
      image-rendering: pixelated; /* å…³é”®ï¼šåƒç´ é£ä¸æ¨¡ç³Š */
      image-rendering: crisp-edges;
      background: #0a0f1c;
      display:block;
    }

    .tapHint{
      position:absolute;
      left:12px; right:12px; bottom:12px;
      padding:10px 12px;
      border-radius: 12px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(232,238,247,.92);
      font-size: 13px;
      line-height: 1.25;
      backdrop-filter: blur(8px);
    }

    /* æ–‡æœ¬åŒº */
    .textCard{
      padding: 14px 14px 16px;
      min-height: 120px; /* ç»™æ‰“å­—æœºé¢„ç•™ä¸€ç‚¹é«˜åº¦é˜²æ­¢è·³åŠ¨ */
    }
    .title{
      margin:0 0 8px;
      font-weight: 650;
      letter-spacing:.2px;
      font-size: 16px;
    }
    .text{
      margin:0;
      color: rgba(232,238,247,.88);
      font-size: 15px;
      line-height: 1.65;
      white-space: pre-line;
      min-height: 1.65em;
    }
    /* æ‰“å­—æœºå…‰æ ‡æ•ˆæœï¼ˆå¯é€‰ï¼‰ */
    .typing-cursor::after {
      content: '|';
      display: inline-block;
      margin-left: 2px;
      animation: blink 1s step-end infinite;
      color: var(--accent);
    }
    @keyframes blink { 50% { opacity: 0; } }

    .hidden{display:none;}

    /* æœ€ç»ˆå±äº¤äº’åŒº */
    .actions{
      display:flex;
      gap:10px;
      margin-top:12px;
    }
    button, a.btn{
      flex:1;
      padding:12px 12px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--fg);
      font-size: 15px;
      font-weight: 600;
      text-align:center;
      text-decoration:none;
      cursor: pointer;
    }
    button.primary, a.btn.primary{
      background: linear-gradient(180deg, rgba(122,167,255,.95), rgba(122,167,255,.65));
      border-color: rgba(122,167,255,.55);
      color:#071022;
    }
    .small{
      margin-top:10px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
    }
    .kouling{
      margin-top:10px;
      padding:10px 12px;
      border-radius: 12px;
      border:1px dashed rgba(255,255,255,.18);
      background: rgba(0,0,0,.22);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 15px;
      letter-spacing:.2px;
      word-break: break-all;
    }

    /* ç®€å•çš„æ·¡å…¥åŠ¨ç”» */
    .fadeIn{
      animation: fadeIn .25s ease-out both;
    }
    @keyframes fadeIn{from{opacity:0; transform: translateY(4px);} to{opacity:1; transform: translateY(0);} }
  </style>
</head>
<body>
  <header>
    <div class="progress">
      <div id="pLeft">1 / 9</div>
      <div id="pRight">ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹æ–‡å­—</div>
    </div>
  </header>

  <main>
    <div class="screen">
      <section class="card imgWrap" id="tapArea" aria-label="ç‚¹å‡»äº¤äº’åŒº">
        <img id="img" class="pixel" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO7WzW0AAAAASUVORK5CYII=" alt="Pixel Art" />
        <div class="tapHint" id="hint">ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹æ–‡å­—</div>
      </section>

      <section class="card textCard hidden" id="textCard">
        <h2 class="title" id="title"></h2>
        <p class="text" id="text"></p>

        <div id="finalExtras" class="hidden">
          <div class="kouling" id="koulingBox"></div>
          <div class="actions">
            <button class="primary" id="copyBtn" type="button">å¤åˆ¶å£ä»¤</button>
            <a class="btn" id="openAlipayBtn" href="#" rel="noopener">æ‰“å¼€æ”¯ä»˜å®</a>
          </div>
          <div class="small" id="finalTips"></div>
        </div>
      </section>
    </div>
  </main>

  <script>
    /**
     * é…ç½®åŒº
     * 1-8å±ï¼šäº¤äº’æ•…äº‹
     * ç¬¬9å±ï¼ˆindex=8ï¼‰ï¼šæ”¯ä»˜å®çº¢åŒ…
     */
    
    // ====== ä¿®æ”¹ï¼šè¿™é‡Œç°åœ¨æ˜¯8ä¸ªåœºæ™¯ ======
    const SCENES = [
      {
        title: "ç»™å–œæ¬¢ä»ªå¼æ„Ÿçš„è‚–è€å¸ˆ",
        text: "è‚–è€å¸ˆè¯´è¿™æ˜¯ç¬¬ä¸€æ¬¡ç»™ç”·ç”Ÿé€èŠ±, é‚£æˆ‘ä¹Ÿè¦é€ç»™è‚–è€å¸ˆè¿™ä»½å……æ»¡ä»ªå¼æ„Ÿçš„ç¤¼ç‰©, ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€â€œç¬¨æ‹™â€çš„ç¤¼ç‰©.æ€»å…±æœ‰9å¼ å“¦, çŒœçŒœé‡Œé¢ä¼šæœ‰å“ªäº›ç…§ç‰‡å§,å˜»å˜»",
        img: "./images/1.png", // æ›¿æ¢ä½ çš„å›¾ç‰‡é“¾æ¥
        hintA: "ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹æ–‡å­—",
        hintB: "å†ç‚¹å‡»è¿›å…¥ä¸‹ä¸€é¡µ"
      },
      {
        title: "æˆ‘ä¸å–œæ¬¢è§†é¢‘",
        text: "æˆ‘å¤§æ¦‚æ˜¯ä¸ªé†‹å›å­, è‚–è€å¸ˆè¯´è¿‡è·Ÿå¼‚æ€§çš„äº’åŠ¨(é™¤äº†å¥½æœ‹å‹å’ŒåŒäº‹),éƒ½èƒ½è®°å¾—.æ‰€ä»¥è¿™ç¬¬ä¸€æ¬¡è¶…é•¿è§†é¢‘,æ„Ÿå—åˆ°äº†è‚–è€å¸ˆå¯¹æˆ‘çš„è¶…çº§ç ´ä¾‹,ä¸å…‰è·Ÿæˆ‘è§†é¢‘, è¿˜è½®æµå±•ç¤ºçŒ«çŒ«,å¯çˆ±å¾—ä¸è¡Œ,èµ¶ç´§å·æ‹!äºæ˜¯æœ‰äº†è¿™ç¬¬äºŒå¼ ç…§ç‰‡.",
        img: "./images/2.png", 
        hintA: "ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹æ–‡å­—",
        hintB: "å†ç‚¹å‡»è¿›å…¥ä¸‹ä¸€é¡µ"
      },
      {
        title: "æ€ä¹ˆèƒ½è¿™ä¹ˆå¯çˆ±!!",
        text: "çœ‹åˆ°è¿™ç»„ç…§ç‰‡,æˆ‘çœŸçš„è¦è¢«å¯çˆ±å¾—èåŒ–äº†.ä¸å…‰é©¬ä¸Šè®¾ç½®ä¸ºå£çº¸, è¿˜å·å·å»æŸ¥äº†ä¸‹è¿™ä¸ªå¸½å­æƒ³é€ç»™ä½ !(ä¸è¿‡æ·˜å®ä¸Šæ²¡æœ‰æ­£å“,æ°”æ­»äº†ğŸ˜¡),ä¸è¿‡åé¢è‚–è€å¸ˆè‡ªå·±ä¹Ÿè§‰å¾—è´µäº†,è€Œä¸”ä¸å¤ªå–œæ¬¢è¿™ç§â€œæº¢ä»·â€,åˆæ›´å–œæ¬¢ä½ äº†,æˆ‘æ€ä¹ˆè¿™ä¹ˆå¤§çš„ç¦æ°”,æ‰¾åˆ°åˆæ¼‚äº®å¯çˆ±,åˆè´¤æƒ çš„å®å®çš„~",
        img: "./images/3.png",
      },
      {
        title: "ç…§ç‰‡å›é¡¾æ—¶é—´!",
        text: "è‚–è€å¸ˆä¸€ç›´åœ¨è·Ÿæˆ‘å‘ä»¥å‰çš„ç…§ç‰‡å‘¢,åŸæ¥ä¸€ç›´æ˜¯æ´»åŠ›æ»¡æ»¡çš„æ ·å­å‘¢,åªæ˜¯ç°åœ¨ç»å¸¸æ„Ÿå¹æ²¡ä¹‹å‰ç˜¦äº†,æˆ‘å¤¹åœ¨ä¸­é—´è¿›é€€ä¸¤éš¾,æˆ‘æ‰“è¿™æ®µè¯çš„æ—¶å€™å¥¹è¿˜åœ¨å¼€å¼€å¿ƒå¿ƒå•ƒç€å†·å†»æ¦´è²,æˆ‘çœ‹ç€ä¹Ÿå¼€å¿ƒ,ä½†ä¹Ÿæƒ³ç›‘ç£å¥¹,è¿™æ ·å°±ä¸ä¼šå†å‚å¤´ä¸§æ°”åœ°è®²å‡ºâ€œæˆ‘å½“æ—¶å¥½ç˜¦äº†â€",
        img: "./images/4.png",
      },
      {
        title: "ç”¨AIçš„è‚–è€å¸ˆ",
        text: "",
        img: "./images/5.png",
      },
      {
        title: "æ°¸è¿œé»˜é»˜æ”¯æŒç†è§£æˆ‘çš„è‚–è€å¸ˆ",
        text: "ç¬¬6é¡µæ–‡æ¡ˆå ä½ã€‚",
        img: "./images/6.png",
      },
      {
        title: "ç¾æ­»æˆ‘äº†!å§å§!!",
        text: "ç¬¬7é¡µæ–‡æ¡ˆå ä½ã€‚",
        img: "./images/7.png",
      },
      {
        title: "åˆ«å¿˜äº†ç‰›ç‰›å’Œå‡‘å‡‘å“¦",
        text: "è¿™æ˜¯æœ€åä¸€å¼ å‰§æƒ…å›¾ã€‚\nå†ç‚¹å‡»ä¸€æ¬¡ï¼Œå°±ä¼šçœ‹åˆ°æˆ‘å‡†å¤‡çš„ç¤¼ç‰©å•¦ã€‚",
        img: "./images/8.png",
        hintB: "å†ç‚¹å‡»é¢†å–ç¤¼ç‰©"
      }
    ];

    // ====== æœ€ç»ˆé¡µé…ç½® (å®é™…ä¸Šæ˜¯ç¬¬9å±) ======
    const FINAL = {
      title: "ç¬¬9é¡µï½œä¸“å±ç¤¼ç‰©",
      desc:
`è¿™æ˜¯é€ç»™ä½ çš„çº¢åŒ…ï¼ŒæŒ‰ä¸‹é¢æ­¥éª¤é¢†å–ï¼š

1ï¼‰ç‚¹å‡»â€œå¤åˆ¶å£ä»¤â€
2ï¼‰ç‚¹å‡»â€œæ‰“å¼€æ”¯ä»˜å®â€
3ï¼‰ç­‰å¾…å¼¹çª—é¢†å–`,
      kouling: "è¿™é‡Œå¡«å†™ä½ çš„çº¢åŒ…å£ä»¤", 
      alipayLink: "", // å¦‚æœæœ‰ scheme link å¯å¡«ï¼Œæ²¡æœ‰åˆ™ä¸å¡«
      tips: "å¦‚æœè·³è½¬å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨æ‰“å¼€æ”¯ä»˜å®æœç´¢å£ä»¤ã€‚"
    };

    // ====== é€»è¾‘ä»£ç  ======
    const $ = (id) => document.getElementById(id);
    
    // å…ƒç´ è·å–
    const elements = {
      img: $("img"),
      tapArea: $("tapArea"),
      hint: $("hint"),
      textCard: $("textCard"),
      title: $("title"),
      text: $("text"),
      finalExtras: $("finalExtras"),
      koulingBox: $("koulingBox"),
      copyBtn: $("copyBtn"),
      openAlipayBtn: $("openAlipayBtn"),
      finalTips: $("finalTips"),
      pLeft: $("pLeft"),
      pRight: $("pRight")
    };

    // çŠ¶æ€å˜é‡
    const TOTAL_STEPS = SCENES.length + 1; // 8åœºæ™¯ + 1æœ€ç»ˆ = 9
    let currentIndex = 0;   // 0 ~ 8
    let isTextRevealed = false;
    let typeInterval = null; // ç”¨äºå­˜å‚¨æ‰“å­—æœºçš„å®šæ—¶å™¨ID

    // --- æ ¸å¿ƒï¼šæ‰“å­—æœºå‡½æ•° ---
    function typeWriter(content, element) {
      // 1. æ¸…ç©ºå†…å®¹å’Œæ—§å®šæ—¶å™¨
      element.textContent = "";
      if (typeInterval) clearInterval(typeInterval);
      
      // 2. æ·»åŠ å…‰æ ‡æ ·å¼
      element.classList.add("typing-cursor");

      // 3. å¼€å§‹æ‰“å­—
      let i = 0;
      const speed = 40; // æ‰“å­—é€Ÿåº¦ï¼Œè¶Šå°è¶Šå¿« (æ¯«ç§’)

      typeInterval = setInterval(() => {
        element.textContent += content.charAt(i);
        i++;
        // æ‰“å®Œäº†
        if (i >= content.length) {
          clearInterval(typeInterval);
          element.classList.remove("typing-cursor"); // ç§»é™¤å…‰æ ‡
        }
      }, speed);
    }

    // --- æ¸²æŸ“å‡½æ•° ---
    function render() {
      // æ‰€æœ‰çš„äº¤äº’éƒ½æ˜¯åŸºäº currentIndex
      const isFinalPage = (currentIndex === SCENES.length); // 8

      // æ›´æ–°é¡¶éƒ¨é¡µç 
      elements.pLeft.textContent = `${currentIndex + 1} / ${TOTAL_STEPS}`;

      if (!isFinalPage) {
        // === æ™®é€šå‰§æƒ…é¡µ (0-7) ===
        const scene = SCENES[currentIndex];
        
        elements.img.src = scene.img;
        elements.title.textContent = scene.title || "";
        
        // éšè—æœ€ç»ˆé¡µçš„æŒ‰é’®
        elements.finalExtras.classList.add("hidden");
        elements.openAlipayBtn.classList.add("hidden");

        if (!isTextRevealed) {
          // çŠ¶æ€Aï¼šåªæ˜¾ç¤ºå›¾ï¼Œéšè—æ–‡å­—æ¡†
          elements.textCard.classList.add("hidden");
          elements.textCard.classList.remove("fadeIn");
          elements.text.textContent = ""; // æ¸…ç©ºæ–‡å­—
          
          elements.hint.textContent = scene.hintA || "ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹æ–‡å­—";
          elements.pRight.textContent = elements.hint.textContent;
        } else {
          // çŠ¶æ€Bï¼šæ˜¾ç¤ºæ–‡å­—æ¡†ï¼Œè§¦å‘æ‰“å­—æœº
          elements.textCard.classList.remove("hidden");
          elements.textCard.classList.add("fadeIn");
          
          // è§¦å‘æ‰“å­—æœº
          typeWriter(scene.text || "", elements.text);

          elements.hint.textContent = scene.hintB || "å†ç‚¹å‡»è¿›å…¥ä¸‹ä¸€é¡µ";
          elements.pRight.textContent = elements.hint.textContent;
        }

      } else {
        // === æœ€ç»ˆçº¢åŒ…é¡µ (8) ===
        // æ¸…é™¤ä¹‹å‰çš„æ‰“å­—æœºé˜²æ­¢è¿˜åœ¨æ‰“
        if (typeInterval) clearInterval(typeInterval);

        elements.img.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO7WzW0AAAAASUVORK5CYII="; // å¯æ¢æœ€ç»ˆå›¾
        elements.title.textContent = FINAL.title;
        
        // æœ€ç»ˆé¡µç›´æ¥æ˜¾ç¤ºå…¨éƒ¨æ–‡å­—ï¼Œä¸ä¸€å®šè¦æ‰“å­—æœºï¼ˆä¹Ÿå¯é€‰æ‹©åŠ ä¸Šï¼‰
        elements.text.textContent = FINAL.desc; 
        elements.text.classList.remove("typing-cursor");

        elements.textCard.classList.remove("hidden");
        elements.finalExtras.classList.remove("hidden");
        elements.openAlipayBtn.classList.remove("hidden");

        elements.koulingBox.textContent = FINAL.kouling;
        elements.finalTips.textContent = FINAL.tips;

        elements.hint.textContent = "å¤åˆ¶å£ä»¤é¢†å–";
        elements.pRight.textContent = "ç¥ä½ å¼€å¿ƒæ¯ä¸€å¤©";
        
        // æ”¯ä»˜å®é“¾æ¥å¤„ç†
        if (FINAL.alipayLink && FINAL.alipayLink.trim()) {
          elements.openAlipayBtn.href = FINAL.alipayLink;
          elements.openAlipayBtn.textContent = "æ‰“å¼€æ”¯ä»˜å®";
        } else {
          elements.openAlipayBtn.href = "#";
          elements.openAlipayBtn.textContent = "æ‰“å¼€æ”¯ä»˜å®"; // ä¿æŒæŒ‰é’®æ ·å¼
        }
      }
    }

    // --- äº¤äº’äº‹ä»¶ ---
    
    // ç‚¹å‡»å›¾ç‰‡åŒºåŸŸ
    elements.tapArea.addEventListener("click", () => {
      const isFinalPage = (currentIndex === SCENES.length);
      if (isFinalPage) return; // æœ€åä¸€é¡µç‚¹å›¾ç‰‡æ²¡ååº”

      if (!isTextRevealed) {
        // è¿˜æ²¡çœ‹æ–‡å­— -> æ˜¾ç¤ºæ–‡å­—
        isTextRevealed = true;
        render();
      } else {
        // çœ‹äº†æ–‡å­— -> ä¸‹ä¸€é¡µ
        currentIndex++;
        isTextRevealed = false;
        render();
      }
    });

    // å¤åˆ¶æŒ‰é’®
    elements.copyBtn.addEventListener("click", async () => {
      const text = FINAL.kouling || "";
      try {
        await navigator.clipboard.writeText(text);
        elements.pRight.textContent = "âœ… å£ä»¤å·²å¤åˆ¶";
        elements.copyBtn.textContent = "å·²å¤åˆ¶";
        setTimeout(()=> elements.copyBtn.textContent = "å¤åˆ¶å£ä»¤", 2000);
      } catch (e) {
        elements.pRight.textContent = "âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·é•¿æŒ‰å£ä»¤å¤åˆ¶";
      }
    });

    // æ”¯ä»˜å®æŒ‰é’®
    elements.openAlipayBtn.addEventListener("click", (e) => {
      if (!FINAL.alipayLink) {
         // å¦‚æœæ²¡å¡«é“¾æ¥ï¼Œé€šå¸¸ä¾é ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢ï¼Œè¿™é‡Œä¸åšæ‹¦æˆªï¼Œ
         // æˆ–è€…å¯ä»¥æ‹¦æˆªæç¤ºâ€œè¯·æ‰‹åŠ¨æ‰“å¼€â€
         // e.preventDefault(); 
      }
    });

    // åˆå§‹åŒ–
    render();

  </script>
</body>
</html>
